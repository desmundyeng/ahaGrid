(function(x,Q){typeof exports=="object"&&typeof module<"u"?Q(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],Q):(x=typeof globalThis<"u"?globalThis:x||self,Q(x.React,x.ReactDOM))})(this,function(x,Q){"use strict";var be={exports:{}},q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ze;function $e(){if(ze)return q;ze=1;var j=x,T=Symbol.for("react.element"),N=Symbol.for("react.fragment"),A=Object.prototype.hasOwnProperty,y=j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M={key:!0,ref:!0,__self:!0,__source:!0};function R(D,S,F){var _,I={},k=null,H=null;F!==void 0&&(k=""+F),S.key!==void 0&&(k=""+S.key),S.ref!==void 0&&(H=S.ref);for(_ in S)A.call(S,_)&&!M.hasOwnProperty(_)&&(I[_]=S[_]);if(D&&D.defaultProps)for(_ in S=D.defaultProps,S)I[_]===void 0&&(I[_]=S[_]);return{$$typeof:T,type:D,key:k,ref:H,props:I,_owner:y.current}}return q.Fragment=N,q.jsx=R,q.jsxs=R,q}var ee={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var We;function Ke(){return We||(We=1,process.env.NODE_ENV!=="production"&&function(){var j=x,T=Symbol.for("react.element"),N=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),D=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),oe=Symbol.iterator,ae="@@iterator";function L(e){if(e===null||typeof e!="object")return null;var t=oe&&e[oe]||e[ae];return typeof t=="function"?t:null}var G=j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function v(e){{for(var t=arguments.length,o=new Array(t>1?t-1:0),s=1;s<t;s++)o[s-1]=arguments[s];B("error",e,o)}}function B(e,t,o){{var s=G.ReactDebugCurrentFrame,f=s.getStackAddendum();f!==""&&(t+="%s",o=o.concat([f]));var p=o.map(function(g){return String(g)});p.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,p)}}var de=!1,ne=!1,ce=!1,Re=!1,_e=!1,ue;ue=Symbol.for("react.module.reference");function Ce(e){return!!(typeof e=="string"||typeof e=="function"||e===A||e===M||_e||e===y||e===F||e===_||Re||e===H||de||ne||ce||typeof e=="object"&&e!==null&&(e.$$typeof===k||e.$$typeof===I||e.$$typeof===R||e.$$typeof===D||e.$$typeof===S||e.$$typeof===ue||e.getModuleId!==void 0))}function Ee(e,t,o){var s=e.displayName;if(s)return s;var f=t.displayName||t.name||"";return f!==""?o+"("+f+")":o}function ge(e){return e.displayName||"Context"}function z(e){if(e==null)return null;if(typeof e.tag=="number"&&v("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case N:return"Portal";case M:return"Profiler";case y:return"StrictMode";case F:return"Suspense";case _:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case D:var t=e;return ge(t)+".Consumer";case R:var o=e;return ge(o._context)+".Provider";case S:return Ee(e,e.render,"ForwardRef");case I:var s=e.displayName||null;return s!==null?s:z(e.type)||"Memo";case k:{var f=e,p=f._payload,g=f._init;try{return z(g(p))}catch{return null}}}return null}var W=Object.assign,Y=0,fe,he,P,ie,pe,ve,Se;function we(){}we.__reactDisabledLog=!0;function me(){{if(Y===0){fe=console.log,he=console.info,P=console.warn,ie=console.error,pe=console.group,ve=console.groupCollapsed,Se=console.groupEnd;var e={configurable:!0,enumerable:!0,value:we,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}Y++}}function je(){{if(Y--,Y===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:W({},e,{value:fe}),info:W({},e,{value:he}),warn:W({},e,{value:P}),error:W({},e,{value:ie}),group:W({},e,{value:pe}),groupCollapsed:W({},e,{value:ve}),groupEnd:W({},e,{value:Se})})}Y<0&&v("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var $=G.ReactCurrentDispatcher,J;function V(e,t,o){{if(J===void 0)try{throw Error()}catch(f){var s=f.stack.trim().match(/\n( *(at )?)/);J=s&&s[1]||""}return`
`+J+e}}var r=!1,l;{var d=typeof WeakMap=="function"?WeakMap:Map;l=new d}function n(e,t){if(!e||r)return"";{var o=l.get(e);if(o!==void 0)return o}var s;r=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var p;p=$.current,$.current=null,me();try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(E){s=E}Reflect.construct(e,[],g)}else{try{g.call()}catch(E){s=E}e.call(g.prototype)}}else{try{throw Error()}catch(E){s=E}e()}}catch(E){if(E&&s&&typeof E.stack=="string"){for(var u=E.stack.split(`
`),C=s.stack.split(`
`),m=u.length-1,b=C.length-1;m>=1&&b>=0&&u[m]!==C[b];)b--;for(;m>=1&&b>=0;m--,b--)if(u[m]!==C[b]){if(m!==1||b!==1)do if(m--,b--,b<0||u[m]!==C[b]){var O=`
`+u[m].replace(" at new "," at ");return e.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",e.displayName)),typeof e=="function"&&l.set(e,O),O}while(m>=1&&b>=0);break}}}finally{r=!1,$.current=p,je(),Error.prepareStackTrace=f}var Z=e?e.displayName||e.name:"",U=Z?V(Z):"";return typeof e=="function"&&l.set(e,U),U}function i(e,t,o){return n(e,!1)}function c(e){var t=e.prototype;return!!(t&&t.isReactComponent)}function w(e,t,o){if(e==null)return"";if(typeof e=="function")return n(e,c(e));if(typeof e=="string")return V(e);switch(e){case F:return V("Suspense");case _:return V("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case S:return i(e.render);case I:return w(e.type,t,o);case k:{var s=e,f=s._payload,p=s._init;try{return w(p(f),t,o)}catch{}}}return""}var h=Object.prototype.hasOwnProperty,xe={},ye=G.ReactDebugCurrentFrame;function K(e){if(e){var t=e._owner,o=w(e.type,e._source,t?t.type:null);ye.setExtraStackFrame(o)}else ye.setExtraStackFrame(null)}function Te(e,t,o,s,f){{var p=Function.call.bind(h);for(var g in e)if(p(e,g)){var u=void 0;try{if(typeof e[g]!="function"){var C=Error((s||"React class")+": "+o+" type `"+g+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[g]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw C.name="Invariant Violation",C}u=e[g](t,g,s,o,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(m){u=m}u&&!(u instanceof Error)&&(K(f),v("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",s||"React class",o,g,typeof u),K(null)),u instanceof Error&&!(u.message in xe)&&(xe[u.message]=!0,K(f),v("Failed %s type: %s",o,u.message),K(null))}}}var se=Array.isArray;function Ie(e){return se(e)}function Ze(e){{var t=typeof Symbol=="function"&&Symbol.toStringTag,o=t&&e[Symbol.toStringTag]||e.constructor.name||"Object";return o}}function Qe(e){try{return Ne(e),!1}catch{return!0}}function Ne(e){return""+e}function Ae(e){if(Qe(e))return v("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ze(e)),Ne(e)}var Fe=G.ReactCurrentOwner,qe={key:!0,ref:!0,__self:!0,__source:!0},Ge,Le;function er(e){if(h.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return e.ref!==void 0}function rr(e){if(h.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return e.key!==void 0}function tr(e,t){typeof e.ref=="string"&&Fe.current}function or(e,t){{var o=function(){Ge||(Ge=!0,v("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};o.isReactWarning=!0,Object.defineProperty(e,"key",{get:o,configurable:!0})}}function ar(e,t){{var o=function(){Le||(Le=!0,v("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};o.isReactWarning=!0,Object.defineProperty(e,"ref",{get:o,configurable:!0})}}var nr=function(e,t,o,s,f,p,g){var u={$$typeof:T,type:e,key:t,ref:o,props:g,_owner:p};return u._store={},Object.defineProperty(u._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(u,"_self",{configurable:!1,enumerable:!1,writable:!1,value:s}),Object.defineProperty(u,"_source",{configurable:!1,enumerable:!1,writable:!1,value:f}),Object.freeze&&(Object.freeze(u.props),Object.freeze(u)),u};function ir(e,t,o,s,f){{var p,g={},u=null,C=null;o!==void 0&&(Ae(o),u=""+o),rr(t)&&(Ae(t.key),u=""+t.key),er(t)&&(C=t.ref,tr(t,f));for(p in t)h.call(t,p)&&!qe.hasOwnProperty(p)&&(g[p]=t[p]);if(e&&e.defaultProps){var m=e.defaultProps;for(p in m)g[p]===void 0&&(g[p]=m[p])}if(u||C){var b=typeof e=="function"?e.displayName||e.name||"Unknown":e;u&&or(g,b),C&&ar(g,b)}return nr(e,u,C,f,s,Fe.current,g)}}var Oe=G.ReactCurrentOwner,Me=G.ReactDebugCurrentFrame;function X(e){if(e){var t=e._owner,o=w(e.type,e._source,t?t.type:null);Me.setExtraStackFrame(o)}else Me.setExtraStackFrame(null)}var Pe;Pe=!1;function De(e){return typeof e=="object"&&e!==null&&e.$$typeof===T}function He(){{if(Oe.current){var e=z(Oe.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function sr(e){return""}var Ye={};function lr(e){{var t=He();if(!t){var o=typeof e=="string"?e:e.displayName||e.name;o&&(t=`

Check the top-level render call using <`+o+">.")}return t}}function Je(e,t){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var o=lr(t);if(Ye[o])return;Ye[o]=!0;var s="";e&&e._owner&&e._owner!==Oe.current&&(s=" It was passed a child from "+z(e._owner.type)+"."),X(e),v('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',o,s),X(null)}}function Ve(e,t){{if(typeof e!="object")return;if(Ie(e))for(var o=0;o<e.length;o++){var s=e[o];De(s)&&Je(s,t)}else if(De(e))e._store&&(e._store.validated=!0);else if(e){var f=L(e);if(typeof f=="function"&&f!==e.entries)for(var p=f.call(e),g;!(g=p.next()).done;)De(g.value)&&Je(g.value,t)}}}function dr(e){{var t=e.type;if(t==null||typeof t=="string")return;var o;if(typeof t=="function")o=t.propTypes;else if(typeof t=="object"&&(t.$$typeof===S||t.$$typeof===I))o=t.propTypes;else return;if(o){var s=z(t);Te(o,e.props,"prop",s,e)}else if(t.PropTypes!==void 0&&!Pe){Pe=!0;var f=z(t);v("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",f||"Unknown")}typeof t.getDefaultProps=="function"&&!t.getDefaultProps.isReactClassApproved&&v("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function cr(e){{for(var t=Object.keys(e.props),o=0;o<t.length;o++){var s=t[o];if(s!=="children"&&s!=="key"){X(e),v("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",s),X(null);break}}e.ref!==null&&(X(e),v("Invalid attribute `ref` supplied to `React.Fragment`."),X(null))}}var Ue={};function Be(e,t,o,s,f,p){{var g=Ce(e);if(!g){var u="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(u+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var C=sr();C?u+=C:u+=He();var m;e===null?m="null":Ie(e)?m="array":e!==void 0&&e.$$typeof===T?(m="<"+(z(e.type)||"Unknown")+" />",u=" Did you accidentally export a JSX literal instead of a component?"):m=typeof e,v("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",m,u)}var b=ir(e,t,o,f,p);if(b==null)return b;if(g){var O=t.children;if(O!==void 0)if(s)if(Ie(O)){for(var Z=0;Z<O.length;Z++)Ve(O[Z],e);Object.freeze&&Object.freeze(O)}else v("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Ve(O,e)}if(h.call(t,"key")){var U=z(e),E=Object.keys(t).filter(function(vr){return vr!=="key"}),ke=E.length>0?"{key: someKey, "+E.join(": ..., ")+": ...}":"{key: someKey}";if(!Ue[U+ke]){var pr=E.length>0?"{"+E.join(": ..., ")+": ...}":"{}";v(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ke,U,pr,U),Ue[U+ke]=!0}}return e===A?cr(b):dr(b),b}}function ur(e,t,o){return Be(e,t,o,!0)}function gr(e,t,o){return Be(e,t,o,!1)}var fr=gr,hr=ur;ee.Fragment=A,ee.jsx=fr,ee.jsxs=hr}()),ee}process.env.NODE_ENV==="production"?be.exports=$e():be.exports=Ke();var a=be.exports,re={},te=Q;if(process.env.NODE_ENV==="production")re.createRoot=te.createRoot,re.hydrateRoot=te.hydrateRoot;else{var le=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;re.createRoot=function(j,T){le.usingClientEntryPoint=!0;try{return te.createRoot(j,T)}finally{le.usingClientEntryPoint=!1}},re.hydrateRoot=function(j,T,N){le.usingClientEntryPoint=!0;try{return te.hydrateRoot(j,T,N)}finally{le.usingClientEntryPoint=!1}}}const Xe=()=>{const[j,T]=x.useState(()=>{const r=localStorage.getItem("ahagrid_gridWidth");return r?Number(r):200}),[N,A]=x.useState(()=>{const r=localStorage.getItem("ahagrid_gridHeight");return r?Number(r):100}),[y,M]=x.useState(()=>{const r=localStorage.getItem("ahagrid_gridColumns");return r?Number(r):6}),[R,D]=x.useState(()=>{const r=localStorage.getItem("ahagrid_gridRows");return r?Number(r):5}),[S,F]=x.useState(()=>{const r=localStorage.getItem("ahagrid_showGridLines");return r?JSON.parse(r):!0}),[_,I]=x.useState(()=>{const r=localStorage.getItem("ahagrid_showHeaders");return r?JSON.parse(r):!0}),[k,H]=x.useState(()=>{const r=localStorage.getItem("ahagrid_draggable");return r?JSON.parse(r):!0}),[oe,ae]=x.useState(null),[L,G]=x.useState(null),[v,B]=x.useState(null),de=[{id:1,header:"🚀 Rocket Widget",content:"Ready for launch!",colSize:1,rowSize:1,gridCol:0,gridRow:0},{id:2,header:"🌟 Star Widget",content:"Shining bright",colSize:2,rowSize:1,gridCol:1,gridRow:0},{id:3,header:"🎨 Art Widget",content:"Creative expression",colSize:1,rowSize:2,gridCol:3,gridRow:0},{id:4,header:"💻 Code Widget",content:"Building the future",colSize:1,rowSize:2,gridCol:0,gridRow:1},{id:5,header:"🎵 Music Widget",content:"Harmony in motion",colSize:1,rowSize:1,gridCol:4,gridRow:0},{id:6,header:"🌍 World Widget",content:"Connected globally",colSize:2,rowSize:2,gridCol:0,gridRow:3},{id:7,header:"⚡ Energy Widget",content:"Powerful and fast",colSize:1,rowSize:1,gridCol:5,gridRow:0},{id:8,header:"🎯 Target Widget",content:"Precision focused",colSize:1,rowSize:1,gridCol:2,gridRow:1},{id:9,header:"🌈 Rainbow Widget",content:"Colorful diversity",colSize:2,rowSize:1,gridCol:4,gridRow:2},{id:10,header:"🔮 Magic Widget",content:"Mysterious wonders",colSize:1,rowSize:1,gridCol:5,gridRow:1}],[ne,ce]=x.useState(()=>{const r=localStorage.getItem("ahagrid_widgets");if(r)try{return JSON.parse(r)}catch(l){console.error("Failed to parse saved widgets:",l)}return de}),Re=r=>{T(r),localStorage.setItem("ahagrid_gridWidth",r.toString())},_e=r=>{A(r),localStorage.setItem("ahagrid_gridHeight",r.toString())},ue=r=>{M(r),localStorage.setItem("ahagrid_gridColumns",r.toString())},Ce=r=>{D(r),localStorage.setItem("ahagrid_gridRows",r.toString())},Ee=r=>{F(r),localStorage.setItem("ahagrid_showGridLines",JSON.stringify(r))},ge=r=>{I(r),localStorage.setItem("ahagrid_showHeaders",JSON.stringify(r))},z=r=>{H(r),localStorage.setItem("ahagrid_draggable",JSON.stringify(r))},W=r=>{ce(r),localStorage.setItem("ahagrid_widgets",JSON.stringify(r))},Y=()=>{localStorage.removeItem("ahagrid_gridWidth"),localStorage.removeItem("ahagrid_gridHeight"),localStorage.removeItem("ahagrid_gridColumns"),localStorage.removeItem("ahagrid_gridRows"),localStorage.removeItem("ahagrid_showGridLines"),localStorage.removeItem("ahagrid_showHeaders"),localStorage.removeItem("ahagrid_draggable"),localStorage.removeItem("ahagrid_widgets"),T(200),A(100),M(6),D(5),F(!0),I(!0),H(!0),ae(null),ce(de)},fe=r=>{const l=[];let d=1e3;const n=Array(y).fill(null).map(()=>Array(R).fill(null));r.forEach(i=>{if(i.gridCol!==void 0&&i.gridRow!==void 0)for(let c=i.gridRow;c<i.gridRow+i.rowSize;c++)for(let w=i.gridCol;w<i.gridCol+i.colSize;w++)c<R&&w<y&&(n[w][c]=i.id)});for(let i=0;i<R;i++)for(let c=0;c<y;c++)n[c][i]===null&&(l.push({id:d++,header:"",content:"",colSize:1,rowSize:1,isPlaceholder:!0,gridCol:c,gridRow:i}),n[c][i]="placeholder");return console.log("Generated placeholders:",l.length,"for empty spaces"),l},he=(r,l,d)=>{const n=[...ne],i=n.findIndex(c=>c.id===r.id);return i!==-1&&(n[i]={...n[i],gridCol:l,gridRow:d}),n},P=ne,ie=[...P,...fe(P)];x.useEffect(()=>{J(P)},[P]);const pe=(r,l)=>{console.log("Interactive drag start for item:",l),r.dataTransfer.setData("text/plain",l.toString());const d=P.find(n=>n.id===l);G(d||null)},ve=r=>{console.log("Interactive drag end"),G(null),B(null)},Se=(r,l)=>{r.preventDefault(),r.dataTransfer.dropEffect="move",l.gridCol!==void 0&&l.gridRow!==void 0&&B({col:l.gridCol,row:l.gridRow})};function we(r,l){if(!L||!v)return!1;const{colSize:d=1,rowSize:n=1}=L;return r>=v.col&&r<v.col+d&&l>=v.row&&l<v.row+n}function me(){return!L||!v?!1:$(L,v.col,v.row)}const je=(r,l)=>{r.preventDefault();const d=r.dataTransfer.getData("text/plain");if(console.log("Interactive drop - dragged:",d,"target:",l),d&&d!==l.toString()){const n=P.find(c=>c.id.toString()===d),i=ie.find(c=>c.id===l);if(console.log("Found dragged item:",n,"target item:",i),n&&i){if(i.isPlaceholder&&i.gridCol!==void 0&&i.gridRow!==void 0)if($(n,i.gridCol,i.gridRow)){const c=n.gridCol,w=n.gridRow,h=he(n,i.gridCol,i.gridRow);console.log("Moving widget from",c,w,"to",i.gridCol,i.gridRow,n.header),console.log("Original position will become a placeholder for future moves"),W(h),setTimeout(()=>{J(h)},100)}else console.log("Widget cannot fit at this position:",n.header),ae(`Cannot place ${n.header} here - not enough space`);else if(!i.isPlaceholder){const c=P.find(w=>w.id===l);if(c&&c.gridCol!==void 0&&c.gridRow!==void 0)if((n.colSize||1)===(c.colSize||1)&&(n.rowSize||1)===(c.rowSize||1)){const h=[...ne],xe=h.findIndex(se=>se.id===n.id),ye=h.findIndex(se=>se.id===c.id),K=n.gridCol,Te=n.gridRow;h[xe]={...n,gridCol:c.gridCol,gridRow:c.gridRow},h[ye]={...c,gridCol:K,gridRow:Te},W(h),setTimeout(()=>{J(h)},100)}else ae(`Cannot swap ${n.header} and ${c.header} - size mismatch`)}}}},$=(r,l,d)=>{if(l+r.colSize>y||d+r.rowSize>R)return!1;let n=null;for(let i=d;i<d+r.rowSize;i++)for(let c=l;c<l+r.colSize;c++){const w=P.find(h=>!h.isPlaceholder&&h.gridCol!==void 0&&h.gridRow!==void 0&&h.id!==r.id&&c>=h.gridCol&&c<h.gridCol+h.colSize&&i>=h.gridRow&&i<h.gridRow+h.rowSize);if(w&&(n||(n=w),n.id!==w.id))return!1}return n?(n.colSize||1)===(r.colSize||1)&&(n.rowSize||1)===(r.rowSize||1):!0},J=r=>{const l=Array(y).fill(null).map(()=>Array(R).fill(null)),d=[];r.forEach(n=>{if(n.gridCol!==void 0&&n.gridRow!==void 0){for(let i=n.gridRow;i<n.gridRow+n.rowSize;i++)for(let c=n.gridCol;c<n.gridCol+n.colSize;c++)if(i<R&&c<y)if(l[c][i]!==null){const w=r.find(h=>h.id===l[c][i]);w&&d.push({widget1:n,widget2:w,position:[c,i]})}else l[c][i]=n.id}}),d.length>0?(console.error("Grid validation failed - overlaps detected:",d),d.forEach(n=>{console.error(`Overlap at position ${n.position}: ${n.widget1.header} overlaps with ${n.widget2.header}`)})):console.log("Grid validation passed - no overlaps detected")},V=!!L;return a.jsxs("div",{className:"app",children:[a.jsxs("header",{className:"app-header",children:[a.jsx("h1",{children:"ahaGrid"}),a.jsx("p",{children:"A flexible grid layout component with re-arrangable widgets"})]}),a.jsxs("div",{className:"controls",children:[a.jsx("h2",{children:"Demo"}),a.jsx("p",{children:"Drag the ⋮⋮ handle in widget headers to rearrange widgets"}),a.jsxs("p",{style:{color:"#666",fontSize:"0.9em"},children:["💡 ",a.jsx("strong",{children:"Tip:"})," Click and drag the ⋮⋮ handle in the header to move widgets around. You can also drop widgets into the dashed placeholder areas to fill empty grid spaces!"]}),a.jsxs("p",{style:{color:"#666",fontSize:"0.9em"},children:["📏 ",a.jsx("strong",{children:"Size Rules:"})," Widgets can only move to spaces that can accommodate their size. Large widgets can't fit in small spaces, and widgets can only swap if they have the same dimensions."]}),a.jsxs("p",{style:{color:"#666",fontSize:"0.9em"},children:["🚫 ",a.jsx("strong",{children:"No Displacement:"})," When a widget moves to an empty space, other widgets stay in their positions. The original position becomes available as a drop target."]}),a.jsx("div",{className:"grid-demo",children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${y}, ${j}px)`,gridAutoRows:`${N}px`,gap:S?"1px":"0px",padding:S?"1px":"0px",backgroundColor:"transparent",width:`${y*j+(S?y-1:0)}px`,maxWidth:"100%"},children:ie.map(r=>{let l=!1;return L&&v&&we(r.gridCol??-1,r.gridRow??-1)&&me()&&(l=!0),a.jsxs("div",{"data-widget-id":r.id,onDragEnd:ve,onDragOver:d=>Se(d,r),onDrop:d=>{me()&&je(d,r.id),B(null)},onDragLeave:()=>B(null),onMouseEnter:d=>{},onMouseLeave:d=>{},style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",boxSizing:"border-box",cursor:(r.isPlaceholder,"default"),userSelect:"none",gridColumn:r.gridCol!==void 0?`${r.gridCol+1} / span ${r.colSize}`:`span ${r.colSize}`,gridRow:r.gridRow!==void 0?`${r.gridRow+1} / span ${r.rowSize}`:`span ${r.rowSize}`,minHeight:r.isPlaceholder?"20px":"auto",transition:"all 0.2s ease",...r.isPlaceholder&&V&&!l&&{border:"2px dashed #ddd"},...r.isPlaceholder&&V&&l&&{border:"2px dashed #2196f3"},...!r.isPlaceholder&&{backgroundColor:"#ffffff",border:l?"2px solid #2196f3":S?"1px solid #ccc":"none"}},children:[_&&!r.isPlaceholder&&a.jsxs("div",{style:{height:"48px",backgroundColor:"#f8f9fa",borderBottom:"1px solid #e9ecef",display:"flex",alignItems:"center",padding:"0px 8px 0 4px",cursor:"default",userSelect:"none",fontWeight:"bold"},children:[k&&a.jsx("span",{draggable:!0,onDragStart:d=>{pe(d,r.id);const n=d.currentTarget.closest("[data-widget-id]");n&&d.dataTransfer.setDragImage(n,20,20)},style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",padding:"0px",cursor:"grab",borderRadius:"50%",transition:"background-color 0.2s ease",userSelect:"none"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#e3f2fd"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent"},onMouseDown:d=>{d.currentTarget.style.cursor="grabbing"},onMouseUp:d=>{d.currentTarget.style.cursor="grab"},children:"⋮⋮"}),a.jsx("span",{style:{paddingLeft:"0.5rem"},children:r.header})]}),!r.isPlaceholder&&a.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"8px",textAlign:"center",color:"#333"},children:r.content})]},r.id)})})}),a.jsx("div",{className:"control-group",children:a.jsxs("label",{children:["Grid Width (px):",a.jsx("input",{type:"range",min:"100",max:"400",value:j,onChange:r=>Re(Number(r.target.value))}),a.jsxs("span",{children:[j,"px"]})]})}),a.jsx("div",{className:"control-group",children:a.jsxs("label",{children:["Grid Height (px):",a.jsx("input",{type:"range",min:"100",max:"300",value:N,onChange:r=>_e(Number(r.target.value))}),a.jsxs("span",{children:[N,"px"]})]})}),a.jsx("div",{className:"control-group",children:a.jsxs("label",{children:["Number of Columns:",a.jsx("input",{type:"range",min:"3",max:"12",value:y,onChange:r=>ue(Number(r.target.value))}),a.jsx("span",{children:y})]})}),a.jsx("div",{className:"control-group",children:a.jsxs("label",{children:["Number of Rows:",a.jsx("input",{type:"range",min:"5",max:"20",value:R,onChange:r=>Ce(Number(r.target.value))}),a.jsx("span",{children:R})]})}),a.jsx("div",{className:"control-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:S,onChange:r=>Ee(r.target.checked)}),"Show Grid Lines"]})}),a.jsx("div",{className:"control-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:_,onChange:r=>ge(r.target.checked)}),"Show Headers"]})}),a.jsx("div",{className:"control-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:k,onChange:r=>z(r.target.checked)}),"Enable Dragging"]})}),oe&&a.jsx("div",{className:"invalid-drop-message",style:{backgroundColor:"#ffebee",color:"#c62828",padding:"8px 12px",borderRadius:"4px",border:"1px solid #ffcdd2",marginTop:"8px",fontSize:"0.9em"},children:a.jsxs("p",{children:["⚠️ ",oe]})}),a.jsx("div",{className:"grid-info",style:{backgroundColor:"#e3f2fd",color:"#1976d2",padding:"8px 12px",borderRadius:"4px",border:"1px solid #bbdefb",marginTop:"8px",fontSize:"0.9em"},children:a.jsxs("p",{children:["📐 ",a.jsx("strong",{children:"Grid Size:"})," ",y," × ",R," = ",y*R," cells | Total Width: ",y*j+(S?y-1:0),"px"]})}),a.jsxs("div",{className:"control-group",style:{marginTop:"16px"},children:[a.jsx("button",{onClick:Y,style:{backgroundColor:"#dc3545",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#c82333"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="#dc3545"},children:"🔄 Reset to Defaults"}),a.jsx("p",{style:{fontSize:"0.8em",color:"#666",marginTop:"4px"},children:"Clears all saved settings and widget positions"})]}),a.jsxs("div",{className:"stored-data-display",style:{marginTop:"16px"},children:[a.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"14px",color:"#333"},children:"📦 Stored Data (localStorage):"}),a.jsx("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"4px",padding:"12px",fontSize:"11px",fontFamily:"monospace",maxHeight:"200px",overflow:"auto",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:(()=>{const r={};r.gridWidth=localStorage.getItem("ahagrid_gridWidth"),r.gridHeight=localStorage.getItem("ahagrid_gridHeight"),r.gridColumns=localStorage.getItem("ahagrid_gridColumns"),r.gridRows=localStorage.getItem("ahagrid_gridRows"),r.showGridLines=localStorage.getItem("ahagrid_showGridLines"),r.showHeaders=localStorage.getItem("ahagrid_showHeaders"),r.draggable=localStorage.getItem("ahagrid_draggable");const l=localStorage.getItem("ahagrid_widgets");if(l)try{const d=JSON.parse(l);r.widgets=`[${d.length} widgets] - ${JSON.stringify(d.slice(0,2))}...`}catch{r.widgets="Error parsing widgets data"}else r.widgets="No widgets data stored";return JSON.stringify(r,null,2)})()})]})]}),a.jsx("footer",{className:"app-footer",children:a.jsx("p",{children:"Built with React + TypeScript + Vite"})})]})};re.createRoot(document.getElementById("root")).render(a.jsx(x.StrictMode,{children:a.jsx(Xe,{})}))});
