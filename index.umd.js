(function(x,Q){typeof exports=="object"&&typeof module<"u"?Q(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],Q):(x=typeof globalThis<"u"?globalThis:x||self,Q(x.React,x.ReactDOM))})(this,function(x,Q){"use strict";var be={exports:{}},q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ze;function $e(){if(ze)return q;ze=1;var E=x,T=Symbol.for("react.element"),P=Symbol.for("react.fragment"),D=Object.prototype.hasOwnProperty,m=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,z={key:!0,ref:!0,__self:!0,__source:!0};function R(N,S,L){var _,O={},W=null,H=null;L!==void 0&&(W=""+L),S.key!==void 0&&(W=""+S.key),S.ref!==void 0&&(H=S.ref);for(_ in S)D.call(S,_)&&!z.hasOwnProperty(_)&&(O[_]=S[_]);if(N&&N.defaultProps)for(_ in S=N.defaultProps,S)O[_]===void 0&&(O[_]=S[_]);return{$$typeof:T,type:N,key:W,ref:H,props:O,_owner:m.current}}return q.Fragment=P,q.jsx=R,q.jsxs=R,q}var ee={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ne;function Ke(){return Ne||(Ne=1,process.env.NODE_ENV!=="production"&&function(){var E=x,T=Symbol.for("react.element"),P=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),N=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),oe=Symbol.iterator,ne="@@iterator";function M(e){if(e===null||typeof e!="object")return null;var t=oe&&e[oe]||e[ne];return typeof t=="function"?t:null}var G=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function v(e){{for(var t=arguments.length,o=new Array(t>1?t-1:0),s=1;s<t;s++)o[s-1]=arguments[s];B("error",e,o)}}function B(e,t,o){{var s=G.ReactDebugCurrentFrame,f=s.getStackAddendum();f!==""&&(t+="%s",o=o.concat([f]));var p=o.map(function(g){return String(g)});p.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,p)}}var de=!1,ae=!1,ce=!1,Re=!1,_e=!1,ue;ue=Symbol.for("react.module.reference");function Ce(e){return!!(typeof e=="string"||typeof e=="function"||e===D||e===z||_e||e===m||e===L||e===_||Re||e===H||de||ae||ce||typeof e=="object"&&e!==null&&(e.$$typeof===W||e.$$typeof===O||e.$$typeof===R||e.$$typeof===N||e.$$typeof===S||e.$$typeof===ue||e.getModuleId!==void 0))}function Ee(e,t,o){var s=e.displayName;if(s)return s;var f=t.displayName||t.name||"";return f!==""?o+"("+f+")":o}function ge(e){return e.displayName||"Context"}function A(e){if(e==null)return null;if(typeof e.tag=="number"&&v("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case D:return"Fragment";case P:return"Portal";case z:return"Profiler";case m:return"StrictMode";case L:return"Suspense";case _:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case N:var t=e;return ge(t)+".Consumer";case R:var o=e;return ge(o._context)+".Provider";case S:return Ee(e,e.render,"ForwardRef");case O:var s=e.displayName||null;return s!==null?s:A(e.type)||"Memo";case W:{var f=e,p=f._payload,g=f._init;try{return A(g(p))}catch{return null}}}return null}var F=Object.assign,Y=0,fe,he,k,ie,pe,ve,me;function Se(){}Se.__reactDisabledLog=!0;function we(){{if(Y===0){fe=console.log,he=console.info,k=console.warn,ie=console.error,pe=console.group,ve=console.groupCollapsed,me=console.groupEnd;var e={configurable:!0,enumerable:!0,value:Se,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}Y++}}function je(){{if(Y--,Y===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:F({},e,{value:fe}),info:F({},e,{value:he}),warn:F({},e,{value:k}),error:F({},e,{value:ie}),group:F({},e,{value:pe}),groupCollapsed:F({},e,{value:ve}),groupEnd:F({},e,{value:me})})}Y<0&&v("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var $=G.ReactCurrentDispatcher,J;function V(e,t,o){{if(J===void 0)try{throw Error()}catch(f){var s=f.stack.trim().match(/\n( *(at )?)/);J=s&&s[1]||""}return`
`+J+e}}var r=!1,l;{var d=typeof WeakMap=="function"?WeakMap:Map;l=new d}function a(e,t){if(!e||r)return"";{var o=l.get(e);if(o!==void 0)return o}var s;r=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var p;p=$.current,$.current=null,we();try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(j){s=j}Reflect.construct(e,[],g)}else{try{g.call()}catch(j){s=j}e.call(g.prototype)}}else{try{throw Error()}catch(j){s=j}e()}}catch(j){if(j&&s&&typeof j.stack=="string"){for(var u=j.stack.split(`
`),C=s.stack.split(`
`),y=u.length-1,b=C.length-1;y>=1&&b>=0&&u[y]!==C[b];)b--;for(;y>=1&&b>=0;y--,b--)if(u[y]!==C[b]){if(y!==1||b!==1)do if(y--,b--,b<0||u[y]!==C[b]){var I=`
`+u[y].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),typeof e=="function"&&l.set(e,I),I}while(y>=1&&b>=0);break}}}finally{r=!1,$.current=p,je(),Error.prepareStackTrace=f}var Z=e?e.displayName||e.name:"",U=Z?V(Z):"";return typeof e=="function"&&l.set(e,U),U}function i(e,t,o){return a(e,!1)}function c(e){var t=e.prototype;return!!(t&&t.isReactComponent)}function w(e,t,o){if(e==null)return"";if(typeof e=="function")return a(e,c(e));if(typeof e=="string")return V(e);switch(e){case L:return V("Suspense");case _:return V("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case S:return i(e.render);case O:return w(e.type,t,o);case W:{var s=e,f=s._payload,p=s._init;try{return w(p(f),t,o)}catch{}}}return""}var h=Object.prototype.hasOwnProperty,ye={},xe=G.ReactDebugCurrentFrame;function K(e){if(e){var t=e._owner,o=w(e.type,e._source,t?t.type:null);xe.setExtraStackFrame(o)}else xe.setExtraStackFrame(null)}function Te(e,t,o,s,f){{var p=Function.call.bind(h);for(var g in e)if(p(e,g)){var u=void 0;try{if(typeof e[g]!="function"){var C=Error((s||"React class")+": "+o+" type `"+g+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[g]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw C.name="Invariant Violation",C}u=e[g](t,g,s,o,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(y){u=y}u&&!(u instanceof Error)&&(K(f),v("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",s||"React class",o,g,typeof u),K(null)),u instanceof Error&&!(u.message in ye)&&(ye[u.message]=!0,K(f),v("Failed %s type: %s",o,u.message),K(null))}}}var se=Array.isArray;function Oe(e){return se(e)}function Ze(e){{var t=typeof Symbol=="function"&&Symbol.toStringTag,o=t&&e[Symbol.toStringTag]||e.constructor.name||"Object";return o}}function Qe(e){try{return We(e),!1}catch{return!0}}function We(e){return""+e}function Ae(e){if(Qe(e))return v("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ze(e)),We(e)}var Fe=G.ReactCurrentOwner,qe={key:!0,ref:!0,__self:!0,__source:!0},Le,Ge;function er(e){if(h.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return e.ref!==void 0}function rr(e){if(h.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return e.key!==void 0}function tr(e,t){typeof e.ref=="string"&&Fe.current}function or(e,t){{var o=function(){Le||(Le=!0,v("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};o.isReactWarning=!0,Object.defineProperty(e,"key",{get:o,configurable:!0})}}function nr(e,t){{var o=function(){Ge||(Ge=!0,v("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};o.isReactWarning=!0,Object.defineProperty(e,"ref",{get:o,configurable:!0})}}var ar=function(e,t,o,s,f,p,g){var u={$$typeof:T,type:e,key:t,ref:o,props:g,_owner:p};return u._store={},Object.defineProperty(u._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(u,"_self",{configurable:!1,enumerable:!1,writable:!1,value:s}),Object.defineProperty(u,"_source",{configurable:!1,enumerable:!1,writable:!1,value:f}),Object.freeze&&(Object.freeze(u.props),Object.freeze(u)),u};function ir(e,t,o,s,f){{var p,g={},u=null,C=null;o!==void 0&&(Ae(o),u=""+o),rr(t)&&(Ae(t.key),u=""+t.key),er(t)&&(C=t.ref,tr(t,f));for(p in t)h.call(t,p)&&!qe.hasOwnProperty(p)&&(g[p]=t[p]);if(e&&e.defaultProps){var y=e.defaultProps;for(p in y)g[p]===void 0&&(g[p]=y[p])}if(u||C){var b=typeof e=="function"?e.displayName||e.name||"Unknown":e;u&&or(g,b),C&&nr(g,b)}return ar(e,u,C,f,s,Fe.current,g)}}var Ie=G.ReactCurrentOwner,Me=G.ReactDebugCurrentFrame;function X(e){if(e){var t=e._owner,o=w(e.type,e._source,t?t.type:null);Me.setExtraStackFrame(o)}else Me.setExtraStackFrame(null)}var ke;ke=!1;function Pe(e){return typeof e=="object"&&e!==null&&e.$$typeof===T}function He(){{if(Ie.current){var e=A(Ie.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function sr(e){return""}var Ye={};function lr(e){{var t=He();if(!t){var o=typeof e=="string"?e:e.displayName||e.name;o&&(t=`

Check the top-level render call using <`+o+">.")}return t}}function Je(e,t){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var o=lr(t);if(Ye[o])return;Ye[o]=!0;var s="";e&&e._owner&&e._owner!==Ie.current&&(s=" It was passed a child from "+A(e._owner.type)+"."),X(e),v('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',o,s),X(null)}}function Ve(e,t){{if(typeof e!="object")return;if(Oe(e))for(var o=0;o<e.length;o++){var s=e[o];Pe(s)&&Je(s,t)}else if(Pe(e))e._store&&(e._store.validated=!0);else if(e){var f=M(e);if(typeof f=="function"&&f!==e.entries)for(var p=f.call(e),g;!(g=p.next()).done;)Pe(g.value)&&Je(g.value,t)}}}function dr(e){{var t=e.type;if(t==null||typeof t=="string")return;var o;if(typeof t=="function")o=t.propTypes;else if(typeof t=="object"&&(t.$$typeof===S||t.$$typeof===O))o=t.propTypes;else return;if(o){var s=A(t);Te(o,e.props,"prop",s,e)}else if(t.PropTypes!==void 0&&!ke){ke=!0;var f=A(t);v("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",f||"Unknown")}typeof t.getDefaultProps=="function"&&!t.getDefaultProps.isReactClassApproved&&v("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function cr(e){{for(var t=Object.keys(e.props),o=0;o<t.length;o++){var s=t[o];if(s!=="children"&&s!=="key"){X(e),v("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",s),X(null);break}}e.ref!==null&&(X(e),v("Invalid attribute `ref` supplied to `React.Fragment`."),X(null))}}var Ue={};function Be(e,t,o,s,f,p){{var g=Ce(e);if(!g){var u="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(u+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var C=sr();C?u+=C:u+=He();var y;e===null?y="null":Oe(e)?y="array":e!==void 0&&e.$$typeof===T?(y="<"+(A(e.type)||"Unknown")+" />",u=" Did you accidentally export a JSX literal instead of a component?"):y=typeof e,v("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",y,u)}var b=ir(e,t,o,f,p);if(b==null)return b;if(g){var I=t.children;if(I!==void 0)if(s)if(Oe(I)){for(var Z=0;Z<I.length;Z++)Ve(I[Z],e);Object.freeze&&Object.freeze(I)}else v("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Ve(I,e)}if(h.call(t,"key")){var U=A(e),j=Object.keys(t).filter(function(vr){return vr!=="key"}),De=j.length>0?"{key: someKey, "+j.join(": ..., ")+": ...}":"{key: someKey}";if(!Ue[U+De]){var pr=j.length>0?"{"+j.join(": ..., ")+": ...}":"{}";v(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,De,U,pr,U),Ue[U+De]=!0}}return e===D?cr(b):dr(b),b}}function ur(e,t,o){return Be(e,t,o,!0)}function gr(e,t,o){return Be(e,t,o,!1)}var fr=gr,hr=ur;ee.Fragment=D,ee.jsx=fr,ee.jsxs=hr}()),ee}process.env.NODE_ENV==="production"?be.exports=$e():be.exports=Ke();var n=be.exports,re={},te=Q;if(process.env.NODE_ENV==="production")re.createRoot=te.createRoot,re.hydrateRoot=te.hydrateRoot;else{var le=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;re.createRoot=function(E,T){le.usingClientEntryPoint=!0;try{return te.createRoot(E,T)}finally{le.usingClientEntryPoint=!1}},re.hydrateRoot=function(E,T,P){le.usingClientEntryPoint=!0;try{return te.hydrateRoot(E,T,P)}finally{le.usingClientEntryPoint=!1}}}const Xe=()=>{const[E,T]=x.useState(()=>{const r=localStorage.getItem("ahagrid_gridWidth");return r?Number(r):200}),[P,D]=x.useState(()=>{const r=localStorage.getItem("ahagrid_gridHeight");return r?Number(r):100}),[m,z]=x.useState(()=>{const r=localStorage.getItem("ahagrid_gridColumns");return r?Number(r):6}),[R,N]=x.useState(()=>{const r=localStorage.getItem("ahagrid_gridRows");return r?Number(r):5}),[S,L]=x.useState(()=>{const r=localStorage.getItem("ahagrid_showGridLines");return r?JSON.parse(r):!0}),[_,O]=x.useState(()=>{const r=localStorage.getItem("ahagrid_showHeaders");return r?JSON.parse(r):!0}),[W,H]=x.useState(()=>{const r=localStorage.getItem("ahagrid_draggable");return r?JSON.parse(r):!0}),[oe,ne]=x.useState(null),[M,G]=x.useState(null),[v,B]=x.useState(null),de=[{id:1,header:"🚀 Rocket Widget",content:"Ready for launch!",colSize:1,rowSize:1,gridCol:0,gridRow:0},{id:2,header:"🌟 Star Widget",content:"Shining bright",colSize:2,rowSize:1,gridCol:1,gridRow:0},{id:3,header:"🎨 Art Widget",content:"Creative expression",colSize:1,rowSize:2,gridCol:3,gridRow:0},{id:4,header:"💻 Code Widget",content:"Building the future",colSize:1,rowSize:2,gridCol:0,gridRow:1},{id:5,header:"🎵 Music Widget",content:"Harmony in motion",colSize:1,rowSize:1,gridCol:4,gridRow:0},{id:6,header:"🌍 World Widget",content:"Connected globally",colSize:2,rowSize:2,gridCol:0,gridRow:3},{id:7,header:"⚡ Energy Widget",content:"Powerful and fast",colSize:1,rowSize:1,gridCol:5,gridRow:0},{id:8,header:"🎯 Target Widget",content:"Precision focused",colSize:1,rowSize:1,gridCol:2,gridRow:1},{id:9,header:"🌈 Rainbow Widget",content:"Colorful diversity",colSize:2,rowSize:1,gridCol:4,gridRow:2},{id:10,header:"🔮 Magic Widget",content:"Mysterious wonders",colSize:1,rowSize:1,gridCol:5,gridRow:1}],[ae,ce]=x.useState(()=>{const r=localStorage.getItem("ahagrid_widgets");if(r)try{return JSON.parse(r)}catch(l){console.error("Failed to parse saved widgets:",l)}return de}),Re=r=>{T(r),localStorage.setItem("ahagrid_gridWidth",r.toString())},_e=r=>{D(r),localStorage.setItem("ahagrid_gridHeight",r.toString())},ue=r=>{z(r),localStorage.setItem("ahagrid_gridColumns",r.toString())},Ce=r=>{N(r),localStorage.setItem("ahagrid_gridRows",r.toString())},Ee=r=>{L(r),localStorage.setItem("ahagrid_showGridLines",JSON.stringify(r))},ge=r=>{O(r),localStorage.setItem("ahagrid_showHeaders",JSON.stringify(r))},A=r=>{H(r),localStorage.setItem("ahagrid_draggable",JSON.stringify(r))},F=r=>{ce(r),localStorage.setItem("ahagrid_widgets",JSON.stringify(r))},Y=()=>{localStorage.removeItem("ahagrid_gridWidth"),localStorage.removeItem("ahagrid_gridHeight"),localStorage.removeItem("ahagrid_gridColumns"),localStorage.removeItem("ahagrid_gridRows"),localStorage.removeItem("ahagrid_showGridLines"),localStorage.removeItem("ahagrid_showHeaders"),localStorage.removeItem("ahagrid_draggable"),localStorage.removeItem("ahagrid_widgets"),T(200),D(100),z(6),N(5),L(!0),O(!0),H(!0),ne(null),ce(de)},fe=r=>{const l=[];let d=1e3;const a=Array(m).fill(null).map(()=>Array(R).fill(null));r.forEach(i=>{if(i.gridCol!==void 0&&i.gridRow!==void 0)for(let c=i.gridRow;c<i.gridRow+i.rowSize;c++)for(let w=i.gridCol;w<i.gridCol+i.colSize;w++)c<R&&w<m&&(a[w][c]=i.id)});for(let i=0;i<R;i++)for(let c=0;c<m;c++)a[c][i]===null&&(l.push({id:d++,header:"",content:"",colSize:1,rowSize:1,isPlaceholder:!0,gridCol:c,gridRow:i}),a[c][i]="placeholder");return console.log("Generated placeholders:",l.length,"for empty spaces"),l},he=(r,l,d)=>{const a=[...ae],i=a.findIndex(c=>c.id===r.id);return i!==-1&&(a[i]={...a[i],gridCol:l,gridRow:d}),a},k=ae,ie=[...k,...fe(k)];x.useEffect(()=>{J(k)},[k]);const pe=(r,l)=>{console.log("Interactive drag start for item:",l),r.dataTransfer.setData("text/plain",l.toString());const d=k.find(a=>a.id===l);G(d||null)},ve=r=>{console.log("Interactive drag end"),G(null),B(null)},me=(r,l)=>{r.preventDefault(),r.dataTransfer.dropEffect="move",l.gridCol!==void 0&&l.gridRow!==void 0&&B({col:l.gridCol,row:l.gridRow})};function Se(r,l){if(!M||!v)return!1;const{colSize:d=1,rowSize:a=1}=M;return r>=v.col&&r<v.col+d&&l>=v.row&&l<v.row+a}function we(){return!M||!v?!1:$(M,v.col,v.row)}const je=(r,l)=>{r.preventDefault();const d=r.dataTransfer.getData("text/plain");if(console.log("Interactive drop - dragged:",d,"target:",l),d&&d!==l.toString()){const a=k.find(c=>c.id.toString()===d),i=ie.find(c=>c.id===l);if(console.log("Found dragged item:",a,"target item:",i),a&&i){if(i.isPlaceholder&&i.gridCol!==void 0&&i.gridRow!==void 0)if($(a,i.gridCol,i.gridRow)){const c=a.gridCol,w=a.gridRow,h=he(a,i.gridCol,i.gridRow);console.log("Moving widget from",c,w,"to",i.gridCol,i.gridRow,a.header),console.log("Original position will become a placeholder for future moves"),F(h),setTimeout(()=>{J(h)},100)}else console.log("Widget cannot fit at this position:",a.header),ne(`Cannot place ${a.header} here - not enough space`);else if(!i.isPlaceholder){const c=k.find(w=>w.id===l);if(c&&c.gridCol!==void 0&&c.gridRow!==void 0)if((a.colSize||1)===(c.colSize||1)&&(a.rowSize||1)===(c.rowSize||1)){const h=[...ae],ye=h.findIndex(se=>se.id===a.id),xe=h.findIndex(se=>se.id===c.id),K=a.gridCol,Te=a.gridRow;h[ye]={...a,gridCol:c.gridCol,gridRow:c.gridRow},h[xe]={...c,gridCol:K,gridRow:Te},F(h),setTimeout(()=>{J(h)},100)}else ne(`Cannot swap ${a.header} and ${c.header} - size mismatch`)}}}},$=(r,l,d)=>{if(l+r.colSize>m||d+r.rowSize>R)return!1;let a=null;for(let i=d;i<d+r.rowSize;i++)for(let c=l;c<l+r.colSize;c++){const w=k.find(h=>!h.isPlaceholder&&h.gridCol!==void 0&&h.gridRow!==void 0&&h.id!==r.id&&c>=h.gridCol&&c<h.gridCol+h.colSize&&i>=h.gridRow&&i<h.gridRow+h.rowSize);if(w&&(a||(a=w),a.id!==w.id))return!1}return a?(a.colSize||1)===(r.colSize||1)&&(a.rowSize||1)===(r.rowSize||1):!0},J=r=>{const l=Array(m).fill(null).map(()=>Array(R).fill(null)),d=[];r.forEach(a=>{if(a.gridCol!==void 0&&a.gridRow!==void 0){for(let i=a.gridRow;i<a.gridRow+a.rowSize;i++)for(let c=a.gridCol;c<a.gridCol+a.colSize;c++)if(i<R&&c<m)if(l[c][i]!==null){const w=r.find(h=>h.id===l[c][i]);w&&d.push({widget1:a,widget2:w,position:[c,i]})}else l[c][i]=a.id}}),d.length>0?(console.error("Grid validation failed - overlaps detected:",d),d.forEach(a=>{console.error(`Overlap at position ${a.position}: ${a.widget1.header} overlaps with ${a.widget2.header}`)})):console.log("Grid validation passed - no overlaps detected")},V=!!M;return n.jsxs("div",{className:"app",children:[n.jsxs("header",{className:"app-header",children:[n.jsx("h1",{children:"ahaGrid"}),n.jsx("p",{children:"A flexible grid layout component with re-arrangable widgets"})]}),n.jsxs("div",{className:"controls",children:[n.jsx("h2",{children:"Demo"}),n.jsx("p",{children:"Drag the ⋮⋮ handle in widget headers to rearrange widgets"}),n.jsxs("p",{style:{color:"#666",fontSize:"0.9em"},children:["💡 ",n.jsx("strong",{children:"Tip:"})," Click and drag the ⋮⋮ handle in the header to move widgets around. You can also drop widgets into the dashed placeholder areas to fill empty grid spaces!"]}),n.jsxs("p",{style:{color:"#666",fontSize:"0.9em"},children:["📏 ",n.jsx("strong",{children:"Size Rules:"})," Widgets can only move to spaces that can accommodate their size. Large widgets can't fit in small spaces, and widgets can only swap if they have the same dimensions."]}),n.jsxs("p",{style:{color:"#666",fontSize:"0.9em"},children:["🚫 ",n.jsx("strong",{children:"No Displacement:"})," When a widget moves to an empty space, other widgets stay in their positions. The original position becomes available as a drop target."]}),n.jsx("div",{className:"grid-demo",children:n.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${m}, ${E}px)`,gridAutoRows:`${P}px`,gap:S?"1px":"0px",padding:S?"1px":"0px",backgroundColor:"transparent",width:`${m*E+(S?m-1:0)}px`,maxWidth:"100%"},children:ie.map(r=>{let l=!1;return M&&v&&Se(r.gridCol??-1,r.gridRow??-1)&&we()&&(l=!0),n.jsxs("div",{"data-widget-id":r.id,onDragEnd:ve,onDragOver:d=>me(d,r),onDrop:d=>{we()&&je(d,r.id),B(null)},onDragLeave:()=>B(null),onMouseEnter:d=>{},onMouseLeave:d=>{},style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",boxSizing:"border-box",cursor:(r.isPlaceholder,"default"),userSelect:"none",gridColumn:r.gridCol!==void 0?`${r.gridCol+1} / span ${r.colSize}`:`span ${r.colSize}`,gridRow:r.gridRow!==void 0?`${r.gridRow+1} / span ${r.rowSize}`:`span ${r.rowSize}`,minHeight:r.isPlaceholder?"20px":"auto",transition:"all 0.2s ease",...r.isPlaceholder&&V&&!l&&{border:"2px dashed #ddd"},...r.isPlaceholder&&V&&l&&{border:"2px dashed #2196f3"},...!r.isPlaceholder&&{backgroundColor:"#ffffff",border:l?"2px solid #2196f3":S?"1px solid #ccc":"none"}},children:[_&&!r.isPlaceholder&&n.jsxs("div",{style:{height:"48px",backgroundColor:"#f8f9fa",borderBottom:"1px solid #e9ecef",display:"flex",alignItems:"center",padding:"0px 8px 0 4px",cursor:"default",userSelect:"none",fontWeight:"bold"},children:[W&&n.jsx("span",{draggable:!0,onDragStart:d=>{pe(d,r.id);const a=d.currentTarget.closest("[data-widget-id]");a&&d.dataTransfer.setDragImage(a,20,20)},style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",padding:"0px",cursor:"grab",borderRadius:"50%",transition:"background-color 0.2s ease",userSelect:"none"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#e3f2fd"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent"},onMouseDown:d=>{d.currentTarget.style.cursor="grabbing"},onMouseUp:d=>{d.currentTarget.style.cursor="grab"},children:"⋮⋮"}),n.jsx("span",{style:{paddingLeft:"0.5rem"},children:r.header})]}),!r.isPlaceholder&&n.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"8px",textAlign:"center",color:"#333"},children:r.content})]},r.id)})})}),n.jsx("div",{className:"control-group",children:n.jsxs("label",{children:["Grid Width (px):",n.jsx("input",{type:"range",min:"100",max:"400",value:E,onChange:r=>Re(Number(r.target.value))}),n.jsxs("span",{children:[E,"px"]})]})}),n.jsx("div",{className:"control-group",children:n.jsxs("label",{children:["Grid Height (px):",n.jsx("input",{type:"range",min:"100",max:"300",value:P,onChange:r=>_e(Number(r.target.value))}),n.jsxs("span",{children:[P,"px"]})]})}),n.jsx("div",{className:"control-group",children:n.jsxs("label",{children:["Number of Columns:",n.jsx("input",{type:"range",min:"3",max:"12",value:m,onChange:r=>ue(Number(r.target.value))}),n.jsx("span",{children:m})]})}),n.jsx("div",{className:"control-group",children:n.jsxs("label",{children:["Number of Rows:",n.jsx("input",{type:"range",min:"5",max:"20",value:R,onChange:r=>Ce(Number(r.target.value))}),n.jsx("span",{children:R})]})}),n.jsx("div",{className:"control-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:S,onChange:r=>Ee(r.target.checked)}),"Show Grid Lines"]})}),n.jsx("div",{className:"control-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:_,onChange:r=>ge(r.target.checked)}),"Show Headers"]})}),n.jsx("div",{className:"control-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:W,onChange:r=>A(r.target.checked)}),"Enable Dragging"]})}),oe&&n.jsx("div",{className:"invalid-drop-message",style:{backgroundColor:"#ffebee",color:"#c62828",padding:"8px 12px",borderRadius:"4px",border:"1px solid #ffcdd2",marginTop:"8px",fontSize:"0.9em"},children:n.jsxs("p",{children:["⚠️ ",oe]})}),n.jsx("div",{className:"grid-info",style:{backgroundColor:"#e3f2fd",color:"#1976d2",padding:"8px 12px",borderRadius:"4px",border:"1px solid #bbdefb",marginTop:"8px",fontSize:"0.9em"},children:n.jsxs("p",{children:["📐 ",n.jsx("strong",{children:"Grid Size:"})," ",m," × ",R," = ",m*R," cells | Total Width: ",m*E+(S?m-1:0),"px"]})}),n.jsxs("div",{className:"control-group",style:{marginTop:"16px"},children:[n.jsx("button",{onClick:Y,style:{backgroundColor:"#dc3545",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#c82333"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="#dc3545"},children:"🔄 Reset to Defaults"}),n.jsx("p",{style:{fontSize:"0.8em",color:"#666",marginTop:"4px"},children:"Clears all saved settings and widget positions"})]}),n.jsxs("div",{className:"stored-data-display",style:{marginTop:"16px"},children:[n.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"14px",color:"#333"},children:"📦 Stored Data (localStorage):"}),n.jsx("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"4px",padding:"12px",fontSize:"11px",fontFamily:"monospace",maxHeight:"200px",overflow:"auto",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:(()=>{const r={};r.gridWidth=localStorage.getItem("ahagrid_gridWidth"),r.gridHeight=localStorage.getItem("ahagrid_gridHeight"),r.gridColumns=localStorage.getItem("ahagrid_gridColumns"),r.gridRows=localStorage.getItem("ahagrid_gridRows"),r.showGridLines=localStorage.getItem("ahagrid_showGridLines"),r.showHeaders=localStorage.getItem("ahagrid_showHeaders"),r.draggable=localStorage.getItem("ahagrid_draggable");const l=localStorage.getItem("ahagrid_widgets");if(l)try{const d=JSON.parse(l);r.widgets=`[${d.length} widgets] - ${JSON.stringify(d.slice(0,2))}...`}catch{r.widgets="Error parsing widgets data"}else r.widgets="No widgets data stored";return JSON.stringify(r,null,2)})()})]})]}),n.jsx("footer",{className:"app-footer",children:n.jsx("p",{children:"Built with React + TypeScript + Vite"})})]})};re.createRoot(document.getElementById("root")).render(n.jsx(x.StrictMode,{children:n.jsx(Xe,{})}))});
